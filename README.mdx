# PII Redaction Tool
## Overview
### üß© Purpose
This application automatically detects and redacts **Personally Identifiable Information (PII)** from customer interactions.

Designed for:
- üßë‚Äçüíº Customer support teams needing to remove sensitive data from tickets
- üßë‚Äçüíª Data engineers and analysts preparing datasets
- üõ°Ô∏è Privacy and compliance officers ensuring GDPR/PII protection

Why use it:
- ‚úÖ Automates PII redaction
- üîå Integrates with internal systems via modular connectors
- üß† Uses LLMs for flexible, accurate detection
- üîí Reduces compliance risk (e.g., GDPR, CCPA)

### üõ°Ô∏è GDPR Context
PII (**Personally Identifiable Information**) refers to any data that can be used ‚Äî either alone or in combination with other information ‚Äî to identify, contact, or locate an individual.

Examples of PII:
- *Direct identifiers:* Full name, social security number, driver‚Äôs license number, passport number, email address, phone number, date of birth.
- *Indirect identifiers:* IP addresses, device identifiers, biometric data, credit card and bank account numbers.
- *Other sensitive data:* Medical information, criminal history, citizenship or immigration status, ethnicity, or religious affiliation.

*PII redaction* is the process of detecting and removing (or masking) this data in order to protect privacy and reduce exposure to sensitive information leaks.

Why redaction matters under *GDPR*:
- ‚úÖ Protect individuals' privacy and prevent unauthorized access to personal data.
- ‚úÖ Support data minimization, keeping only the data that's truly necessary.
- ‚úÖ Reduce risk when data is shared, stored, or processed‚Äîespecially by third parties or internal teams not authorized to access PII.

## ‚öôÔ∏è Functionality

###  General Workflow (System-to-System Integration)
1. Customer interactions ‚Äî such as support tickets, messages, chats or emails ‚Äî are stored in a connected data source (e.g., CRM, analytics platform, or internal database).
2. The app retrieves ticket data via a pre-configured API connector, using a unique ticket ID.
Multiple connectors can be supported simultaneously, making the app easily extendable.
3. The app analyzes the ticket content, detects any PII, and applies redaction according to the configured strategy.
4. The redacted ticket is then pushed back to the original system, replacing the unredacted version.

###  CRM-Agent Workflow (Manual Trigger via Webhook)
1. A support agent opens a ticket in the CRM and clicks a pre-configured "Redact PII" button.
2. This button triggers a webhook to the app, passing the ticket ID and CRM source.
3. The app fetches the ticket, scans for PII, and performs redaction. 
In some cases (like with Zendesk integration) redaction executed on the CRM level, the app should only detect PIIs.
4. The ticket content is updated in the CRM with the redacted version ‚Äî seamlessly and automatically.

###  Redaction Strategies

The app supports multiple redaction strategies to handle detected PII.  

| Strategy   | Description                                                                 | Example Output                        |
|------------|-----------------------------------------------------------------------------|---------------------------------------|
| `mask`     | Replaces every character in the PII span with a `*`.                        | `Email: ********************`         |
| `tokenize` | Replaces the PII with a structured placeholder that includes the type.      | `Email: [PII::email]`                 |
| `hash`     | Replaces the PII with a hashed version (useful for anonymized comparisons). | `Email: 6f8db599de986fab7a21625b7916589c` |

‚ÑπÔ∏è **Default strategy:** `mask`

## üîå Creating and Using Connectors

To integrate with a new CRM or data platform, implement a connector module that defines two functions:
```python

def fetch_ticket(source: str, ticket_id: str) -> Ticket: ...
def update_ticket(source: str, redacted_ticket: RedactedTicket) -> None: ...


```

Requirements:
- The connector must reside in connectors/ and be registered in connector_registry.py.
- The source string passed to the app (e.g. "zendesk", "mock") is used to route to the correct connector.

A test/mock connector  is included out of the box under `connectors/test_crm_connector.py`. This allows testing the system end-to-end without any real data source

You can use it by sending this payload to the `/ticket` endpoint:
```json

{
  "source": "test",
  "ticket_id": 101
}


```




## üöÄ Setup & Deployment

### Prerequisites

Make sure you have the following installed on your system:

* **Python 3.13 or later**
* **pip** (Python package installer)
* **Git** (to clone the repository)
* **Virtual environment support** (`venv`)
- (Optional) **Docker**

---

### Clone the Repository

```bash
git clone https://github.com/PSavvateev/pii-redaction-tool.git
cd pii-redaction-tool
```

---

### Create Virtual Environment

Create and activate a virtual environment:

```bash
python -m venv venv
source venv/bin/activate      # On Linux/Mac
venv\Scripts\activate         # On Windows
```

---

### Install Dependencies

Install the required packages from `requirements.txt`:

```bash
pip install -r requirements.txt
```

---

### Environment Variables

Create a `.env` file in the project root. You can start from the provided `.env.example`:

```bash
cp .env.example .env
```

Edit the `.env` file with your configuration:

```env
API_KEY=your_api_key_here
REDACTION_STRATEGY=mask
SOURCE_ORIGIN=http://localhost:3000
LOCAL_HOST_ORIGIN=http://localhost:8000
```

* `API_KEY`: used for secure API access
* `REDACTION_STRATEGY`: redaction mode ‚Äî one of `mask`, `tokenize`, or `hash`
* `SOURCE_ORIGIN`: origin of your data source
* `LOCAL_HOST_ORIGIN`: origin of the local backend server (FastAPI)

---

### Run the App Locally

To start the FastAPI app locally:

```bash
uvicorn main:app --reload
```

It will be available at [http://localhost:8000](http://localhost:8000).

---

### Optional: Run with Docker

1. Build the Docker image:

```bash

docker build -t pii-redaction-tool .

```

2. Run the container:

```bash

docker run -p 8000:8000 --env-file .env pii-redaction-tool

```

### Run a Test Request (Optional)

Use `curl` or Postman to simulate an incoming webhook:

```bash
curl -X POST http://localhost:8000/ticket \
     -H "x-api-key: your_api_key_here" \
     -H "Content-Type: application/json" \
     -d '{
           "source": "zendesk",
           "ticket_id": 101
         }'
```

---


## Tech Details
### App Architecture
### Stack
- üêç Python v3.13
- üöÄ FastAPI 
- ü§ñ Google ADK (Agent Development Kit) v1.5.0
### Versions
#### Curent Version

